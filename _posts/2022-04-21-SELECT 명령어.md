---
layout: post
title: SELECT 명령어
category: database
---

### Table of contents
- [테이블 생성](#테이블-생성)
- [데이터 읽기](#데이터-읽기)
	- [기본 형식](#기본-형식)
	- [필드 목록](#필드-목록)
	- [계산값의 출력](#계산값의-출력)
- [조건문](#조건문)
	- [필드 비교](#필드-비교)
	- [NULL 비교](#NULL-비교)
	- [논리 연산자](#논리-연산자)
	- [LIKE](#LIKE)
	- [BETWEEN](#BETWEEN)
	- [IN](#IN)
- [정렬](#정렬)

---

# [테이블 생성](#테이블-생성)
```
CREATE TABLE tCity
(
	name VARCHAR(10) PRIMARY KEY,
	area INT NULL,
	popu INT NULL,
	metro VARCHAR(1) NOT NULL,
	region VARCHAR(10) NOT NULL
);
```

---

# [데이터 읽기](#데이터-읽기)
## [기본 형식](#기본-형식)
```
SELECT column1, column2, ...
FROM table_name
(WHERE conditions)
(ORDER BY column1, column2, ... ASC | DESC)
```

아래 명령어는 테이블 전체를 출력한다.

`SELECT * FROM table_name;`

## [필드 목록](#필드-목록)

아래 명령어는 name과 area만 출력한다.

`SELECT name, area FROM tCity;`

필드에 대한 별명을 지정하여 출력할 수도 있다.

`SELECT name AS 도시명, area AS "면적(제곱km)" FROM tCity;`


별명은 공백이나 특수문자를 포함할 수 있어 큰 따옴표로 감싸되 평이한 단어라면 생략해도 상관없다.

AS 또한 생략 가능하다.

## [계산값의 출력](#계산값의-출력)
필드 목록에 계산식을 사용하면 테이블에 저장된 값을 가공하여 출력한다.
```
SELECT name, popu * 10000 '인구(명)' FROM tCity;
SELECT name, area, popu, popu * 10000 / area '인구 밀도' FROM tCity;
```

---

# [조건문](#조건문)
## [필드 비교](#필드-비교)
`WHERE`절은 읽을 레코드의 조건을 지정한다.

조건문은 필드와 상수, 변수 등을 비교하는 표현식이되 비교 대상끼리 타입이 호환되어야 한다.

조건문에 사용하는 비교 연산자는 수학의 등호 및 부등호와 같다.

숫자는 상수를 그냥 쓰지만 문자열과 날짜 상수는 항상 작은 따옴표로 감싸야 한다.

| 연산자 | 예 |
|:----:|:---:|
| A = B | WHERE name = '서울' |
| A > B | WHERE area > 50 |
| A < B | WHERE popu < 100 |
| A >= B | WHERE popu >= 100 |
| A <= B | WHERE popu <= 100 |
| A != B | WHERE region <> '경기' |

## [NULL 비교](#NULL-비교)
NULL은 값이 아니라 상태이기 때문에 = 연산자로는 비교할 수 없다.

NULL 상태와 비교하는 `IS NULL` 연산자를 사용하여 비교한다.

`SELECT * FROM tCity WHERE popu IS NULL;`

## [논리 연산자](#논리-연산자)
두 개 이상의 조건을 동시에 확인할 때는 AND, OR 논리 연산자를 사용한다.

AND의 우선 순위가 OR 보다 높다.

애매할 때는 괄호로 우선 순위를 명확히 지정하자.

다음 두 쿼리문은 논리 연산자 우선 순위에 따라 결과가 다르게 나타난다.
```
SELECT * FROM tCity WHERE region = '경기' AND popu >= 50 OR area >= 500;
SELECT * FROM tCity WHERE region = '경기' AND (popu >= 50 OR area >= 500);
```

NOT 연산자는 표현식의 진위 여부를 반대로 바꾼다.

복합 조건의 반대를 취할 경우 편리하다.
```
SELECT * FROM tCity WHERE region != '전라' AND metro != 'y';
SELECT * FROM tCity WHERE NOT(region = '전라' OR metro = 'y');
```

## [LIKE](#LIKE)
패턴으로 부분 문자열을 검색한다.

LIKE 문의 패턴에는 다음 와일드 카드를 사용한다.
| 문자 | 설명 |
|:---:|:---:|
|%|임의 개수의 임의 문자|
|_|하나의 임의 문자|
|[]|[] 안에 포함된 문자 리스트 중 하나의 문자|
|[^]|[^] 안에 포함된 문자 리스트에 포함되지 않은 하나의 문자|

```
WHERE name LIKE '%천%'; -- '천'이 들어가는 이름
WHERE sale LIKE '%30#%' ESCAPE '#'; -- # 문자를 이스케이프 문자로 지정
```

## [BETWEEN](#BETWEEN)
`BETWEEN 최소값 AND 최대값`

값의 범위를 제한한다.

```
WHERE popu BETWEEN 50 AND 100;
-- 이하 동일
WHERE popu >= 50 AND popu <= 100;
```

범위 조건은 주로 수치값에 대해 사용하지만 문자열이나 날짜 등에도 사용할 수 있다.

대소를 가릴 수만 있다면 어떤 타입이든지 >, < 부등 비교가 가능하며 따라서 범위 검색도 가능하다.
```
/*
문자열은 사전 순으로 비교한다.
'가'씨와 '사'씨 사이의 이름을 구한다.
-> 김씨, 감씨, 논씨, ...
*/
WHERE name BETWEEN '가' AND '사';
WHERE joindate BETWEEN '20150101' AND '20180101';
```

## [IN](#IN)
IN 연산자 뒤의 괄호 안에 콤마로 구분된 값 목록을 나열하여 이 중 하나에 해당하는지 확인한다.

```
SELECT * FROM tCity WHERE region IN ('경상', '전라');
SELECT * FROM tCity WHERE region NOT IN ('경상', '전라');
SELECT * FROM tCity WHERE region LIKE IN ('경%', '전%');
```

# [정렬](#정렬)
